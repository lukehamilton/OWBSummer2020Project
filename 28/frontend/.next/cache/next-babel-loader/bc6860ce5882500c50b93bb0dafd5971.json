{"ast":null,"code":"import _styled from \"@emotion/styled-base\";\nvar _jsxFileName = \"/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport getCollectionItems from \"../../flow/scripts/get-collection-items.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nconst Container = /*#__PURE__*/_styled(\"div\", {\n  target: \"e1fz02ct0\",\n  label: \"Container\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\"\n}, false ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0JrQiIsImZpbGUiOiIvVXNlcnMvbHVrZWhhbWlsdG9uL2RldmVsb3BtZW50L2x5cmEtbGFicy1kZXYvbHlyYS1sYWJzL2Zyb250ZW5kL2NvbXBvbmVudHMvd2FsbGV0LXNldHRpbmdzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIHNkayBmcm9tIFwiQG9uZmxvdy9zZGtcIjtcbmltcG9ydCBKU09OUHJldHR5IGZyb20gXCJyZWFjdC1qc29uLXByZXR0eVwiO1xuaW1wb3J0IENvcmFsQnV0dG9uIGZyb20gXCJAbGlicmFyeS9jb21wb25lbnRzL2J1dHRvbnMvY29yYWxcIjtcbmltcG9ydCBNaW50QnV0dG9uIGZyb20gXCJAbGlicmFyeS9jb21wb25lbnRzL2J1dHRvbnMvbWludFwiO1xuaW1wb3J0IEdyYWRpZW50QnV0dG9uIGZyb20gXCJAbGlicmFyeS9jb21wb25lbnRzL2J1dHRvbnMvZ3JhZGllbnRcIjtcbmltcG9ydCBjaGVja1JlZmVyZW5jZSBmcm9tIFwiLi4vLi4vZmxvdy9zY3JpcHRzL2NoZWNrLXJlZi5jZGNcIjtcbmltcG9ydCBjaGVja0NvbGxlY3Rpb24gZnJvbSBcIi4uLy4uL2Zsb3cvc2NyaXB0cy9jaGVjay1jb2xsZWN0aW9uLmNkY1wiO1xuaW1wb3J0IHZhdWx0QmFsYW5jZSBmcm9tIFwiLi4vLi4vZmxvdy9zY3JpcHRzL3ZhdWx0LWJhbGFuY2UuY2RjXCI7XG5pbXBvcnQgZ2V0Q29sbGVjdGlvbkl0ZW1zIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvZ2V0LWNvbGxlY3Rpb24taXRlbXMuY2RjXCI7XG5pbXBvcnQgdXNlclZhdWx0IGZyb20gXCIuLi8uLi9mbG93L3RyYW5zYWN0aW9ucy91c2VyLXZhdWx0LmNkY1wiO1xuaW1wb3J0IHNldHVwTkZUQ29sbGVjdGlvbiBmcm9tIFwiLi4vLi4vZmxvdy90cmFuc2FjdGlvbnMvc2V0dXAtbmZ0LWNvbGxlY3Rpb24uY2RjXCI7XG5pbXBvcnQgc3R5bGVkIGZyb20gXCJAZW1vdGlvbi9zdHlsZWRcIjtcbmltcG9ydCAqIGFzIGZjbCBmcm9tIFwiQG9uZmxvdy9mY2xcIjtcbmltcG9ydCB7IFdISVRFLCBMSUdIVF9DT1JBTCwgTUFHSUNfTUlOVCB9IGZyb20gXCJAc3R5bGUvY29sb3JzXCI7XG5cbmNvbnN0IENvbnRhaW5lciA9IHN0eWxlZChcImRpdlwiKSh7XG4gIGRpc3BsYXk6IFwiZmxleFwiLFxuICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICBib3JkZXJSYWRpdXM6IDMsXG4gIGJhY2tncm91bmRDb2xvcjogV0hJVEUsXG4gIGJveFNoYWRvdzogXCIwIDFweCAycHggMCByZ2JhKDAsMCwwLC4xKVwiLFxuICBwYWRkaW5nOiBcIjFyZW1cIixcbn0pO1xuXG5jb25zdCBXYWxsZXRTZXR0aW5ncyA9ICgpID0+IHtcbiAgY29uc3QgW3dhbGxldFVzZXIsIHNldFdhbGxldFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFt2YXVsdElzU2V0dXAsIHNldFZhdWx0SXNTZXR1cF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb2xsZWN0aW9uSXNTZXR1cCwgc2V0Q29sbGVjdGlvbklzU2V0dXBdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdChcbiAgICAoKSA9PlxuICAgICAgZmNsLmN1cnJlbnRVc2VyKCkuc3Vic2NyaWJlKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgICAgIGlmICh1c2VyLmxvZ2dlZEluKSB7XG4gICAgICAgICAgc2V0V2FsbGV0VXNlcih1c2VyKTtcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgd2FsbGV0IGlzIHNldCB1cCB5ZXRcbiAgICAgICAgICBjb25zdCB2YXVsdFN0YXR1cyA9IGF3YWl0IGNoZWNrVXNlclZhdWx0U3RhdHVzKCk7XG4gICAgICAgICAgc2V0VmF1bHRJc1NldHVwKHZhdWx0U3RhdHVzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInZhdWx0SXNTZXR1cFwiLCB2YXVsdElzU2V0dXApO1xuICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25TdGF0dXMgPSBhd2FpdCBjaGVja1VzZXJDb2xsZWN0aW9uU3RhdHVzKCk7XG4gICAgICAgICAgc2V0Q29sbGVjdGlvbklzU2V0dXAoY29sbGVjdGlvblN0YXR1cyk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJjb2xsZWN0aW9uU3RhdHVzXCIsIGNvbGxlY3Rpb25TdGF0dXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXMgbm90IGxvZ2dlZCBpblwiKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgW11cbiAgKTtcblxuICBjb25zdCB3YWxsZXRDb25uZWN0ZWQgPSB3YWxsZXRVc2VyICYmIHdhbGxldFVzZXIubG9nZ2VkSW47XG4gIGNvbnN0IHdhbGxldE5vdENvbm5lY3RlZCA9XG4gICAgd2FsbGV0VXNlciA9PT0gbnVsbCB8fCAod2FsbGV0VXNlciAmJiAhd2FsbGV0VXNlci5sb2dnZWRJbik7XG5cbiAgY29uc3QgZ2V0QWRkcmVzcyA9ICh1c2VyLCBudWxsUHJlZml4ID0gdHJ1ZSkgPT4ge1xuICAgIHJldHVybiBudWxsUHJlZml4ID8gYDB4JHt1c2VyLmFkZHJ9YCA6IHVzZXIuYWRkcjtcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0ZUNvZGUgPSBhc3luYyAocmF3Q29kZSwgbWF0Y2gpID0+IHtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gcmF3Q29kZTtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSB9ID0gbWF0Y2g7XG4gICAgcmV0dXJuIHJhd0NvZGUucmVwbGFjZShxdWVyeSwgKGl0ZW0pID0+IHtcbiAgICAgIHJldHVybiBtYXRjaFtpdGVtXTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyQmFsYW5jZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImNoZWNraW5nIHVzZXIgYmFsYW5jZVwiKTtcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHgwMWNmMGUyZjJmNzE1NDUwXCI7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZSh2YXVsdEJhbGFuY2UsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICBjb25zb2xlLmxvZyhcImJhbGFuY2VcIiwgYmFsYW5jZSk7XG4gICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS1cIik7XG4gIH07XG5cbiAgY29uc3QgZ2V0VXNlckNvbGxlY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJjYWxsaW5nIGdldFVzZXJDb2xsZWN0aW9uXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiY2hlY2tpbmcgdXNlciBiYWxhbmNlXCIpO1xuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweGYzZmNkMmMxYTc4ZjVlZWVcIjtcbiAgICBjb25zdCBzY3JpcHRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKGdldENvbGxlY3Rpb25JdGVtcywge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICAgIFwiMHgwMlwiOiBhZGRyZXNzLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjcmlwdCA9IHNkay5zY3JpcHRgJHtzY3JpcHRDb2RlfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChbc2NyaXB0XSk7XG4gICAgY29uc3QgaXRlbXMgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICBjb25zb2xlLmxvZyhcIml0ZW1zXCIsIGl0ZW1zKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgfTtcblxuICBjb25zdCBzZXR1cFVzZXJWYXVsdCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgdGhlIHVzZXIgdmF1bHRcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3QgeyBhdXRob3JpemF0aW9uIH0gPSB1c2VyO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4MDFjZjBlMmYyZjcxNTQ1MFwiO1xuICAgIGNvbnN0IGluaXRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKHVzZXJWYXVsdCwge1xuICAgICAgcXVlcnk6IC8oMHgwMSkvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluaXRSZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFxuICAgICAgICBbXG4gICAgICAgICAgc2RrLnRyYW5zYWN0aW9uYCR7aW5pdENvZGV9YCxcbiAgICAgICAgICBmY2wucHJvcG9zZXIoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgZmNsLnBheWVyKGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgIGZjbC5hdXRob3JpemF0aW9ucyhbYXV0aG9yaXphdGlvbl0pLFxuICAgICAgICAgIGZjbC5saW1pdCgxMDApLFxuICAgICAgICBdLFxuICAgICAgICB7XG4gICAgICAgICAgbm9kZTogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIixcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwic2V0dXBVc2VyVmF1bHQgaW5pdFJlc3BvbnNlXCIsIGluaXRSZXNwb25zZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coXCJzZXR1cFVzZXJWYXVsdCBjYXVnaHQgZXJyb3JcIiwgZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNoZWNrVXNlclZhdWx0U3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweDAxY2YwZTJmMmY3MTU0NTBcIjtcbiAgICBjb25zdCBzY3JpcHRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKGNoZWNrUmVmZXJlbmNlLCB7XG4gICAgICBxdWVyeTogLygweDAxfDB4MDIpL2csXG4gICAgICBcIjB4MDFcIjogY29udHJhY3RBZGRyZXNzLFxuICAgICAgXCIweDAyXCI6IGFkZHJlc3MsXG4gICAgfSk7XG4gICAgY29uc3Qgc2NyaXB0ID0gc2RrLnNjcmlwdGAke3NjcmlwdENvZGV9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFtzY3JpcHRdKTtcbiAgICBjb25zdCBjaGVja1Jlc3VsdCA9IGF3YWl0IGZjbC5kZWNvZGUocmVzcG9uc2UpO1xuICAgIHJldHVybiBjaGVja1Jlc3VsdDtcbiAgfTtcblxuICBjb25zdCBjaGVja1VzZXJDb2xsZWN0aW9uU3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiLS0tLSBjYWxsaW5nIGNoZWNrVXNlckNvbGxlY3Rpb25TdGF0dXMgLS0tLVwiKTtcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHhmM2ZjZDJjMWE3OGY1ZWVlXCI7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZShjaGVja0NvbGxlY3Rpb24sIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwic2NyaXB0Q29kZVwiLCBzY3JpcHRDb2RlKTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gYXdhaXQgZmNsLmRlY29kZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIGNoZWNrUmVzdWx0O1xuICB9O1xuXG4gIGNvbnN0IHNldHVwVXNlckNvbGxlY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIHRoZSB1c2VyIHZhdWx0XG4gICAgY29uc3QgdXNlciA9IGZjbC5jdXJyZW50VXNlcigpO1xuICAgIGNvbnN0IHsgYXV0aG9yaXphdGlvbiB9ID0gdXNlcjtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweGYzZmNkMmMxYTc4ZjVlZWVcIjtcbiAgICBjb25zdCBpbml0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZShzZXR1cE5GVENvbGxlY3Rpb24sIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDEpL2csXG4gICAgICBcIjB4MDFcIjogY29udHJhY3RBZGRyZXNzLFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpbml0UmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChcbiAgICAgICAgW1xuICAgICAgICAgIHNkay50cmFuc2FjdGlvbmAke2luaXRDb2RlfWAsXG4gICAgICAgICAgZmNsLnByb3Bvc2VyKGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgIGZjbC5wYXllcihhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICBmY2wuYXV0aG9yaXphdGlvbnMoW2F1dGhvcml6YXRpb25dKSxcbiAgICAgICAgICBmY2wubGltaXQoMTAwKSxcbiAgICAgICAgXSxcbiAgICAgICAge1xuICAgICAgICAgIG5vZGU6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwTkZUQ29sbGVjdGlvbiBpbml0UmVzcG9uc2VcIiwgaW5pdFJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwTkZUQ29sbGVjdGlvbiBjYXVnaHQgZXJyb3JcIiwgZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHt3YWxsZXROb3RDb25uZWN0ZWQgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtmY2wuYXV0aGVudGljYXRlfT5Db25uZWN0IFdhbGxldDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiAhdmF1bHRJc1NldHVwICYmIChcbiAgICAgICAgICA8Q29yYWxCdXR0b24gb25DbGljaz17c2V0dXBVc2VyVmF1bHR9PlNldHVwIFZhdWx0PC9Db3JhbEJ1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxiciAvPlxuICAgICAgICB7d2FsbGV0Q29ubmVjdGVkICYmICFjb2xsZWN0aW9uSXNTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e3NldHVwVXNlckNvbGxlY3Rpb259PlxuICAgICAgICAgICAgU2V0dXAgQ29sbGVjdGlvblxuICAgICAgICAgIDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiB2YXVsdElzU2V0dXAgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtnZXRVc2VyQmFsYW5jZX0+R2V0IFVzZXIgQmFsYW5jZTwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiBjb2xsZWN0aW9uSXNTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e2dldFVzZXJDb2xsZWN0aW9ufT5cbiAgICAgICAgICAgIEdldCBVc2VyIENvbGxlY3Rpb25cbiAgICAgICAgICA8L0NvcmFsQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIHt3YWxsZXRDb25uZWN0ZWQgJiYgKFxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDE0IH19PlxuICAgICAgICAgICAgPEpTT05QcmV0dHkgaWQ9XCJqc29uLXByZXR0eVwiIGRhdGE9e3dhbGxldFVzZXJ9PjwvSlNPTlByZXR0eT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvQ29udGFpbmVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgV2FsbGV0U2V0dGluZ3M7XG4iXX0= */\");\n\nconst WalletSettings = () => {\n  const {\n    0: walletUser,\n    1: setWalletUser\n  } = useState(null);\n  const {\n    0: vaultIsSetup,\n    1: setVaultIsSetup\n  } = useState(false);\n  const {\n    0: collectionIsSetup,\n    1: setCollectionIsSetup\n  } = useState(false);\n  useEffect(() => fcl.currentUser().subscribe(async user => {\n    if (user.loggedIn) {\n      setWalletUser(user); // Check if the wallet is set up yet\n\n      const vaultStatus = await checkUserVaultStatus();\n      setVaultIsSetup(vaultStatus);\n      console.log(\"vaultIsSetup\", vaultIsSetup);\n      const collectionStatus = await checkUserCollectionStatus();\n      setCollectionIsSetup(collectionStatus);\n      console.log(\"collectionStatus\", collectionStatus);\n    } else {\n      console.log(\"is not logged in\");\n    }\n  }), []);\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected = walletUser === null || walletUser && !walletUser.loggedIn;\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n\n    const {\n      query\n    } = match;\n    return rawCode.replace(query, item => {\n      return match[item];\n    });\n  };\n\n  const getUserBalance = async () => {\n    console.log(\"checking user balance\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(vaultBalance, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const balance = await fcl.decode(response);\n    console.log(\"---------------\");\n    console.log(\"balance\", balance);\n    console.log(\"---------------\");\n  };\n\n  const getUserCollection = async () => {\n    console.log(\"calling getUserCollection\");\n    console.log(\"checking user balance\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(getCollectionItems, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const items = await fcl.decode(response);\n    console.log(\"---------------\");\n    console.log(\"items\", items);\n    console.log(\"---------------\");\n  };\n\n  const setupUserVault = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const {\n      authorization\n    } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(userVault, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress\n    });\n\n    try {\n      const initResponse = await fcl.send([sdk.transaction`${initCode}`, fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n        node: \"http://localhost:8080\"\n      });\n      console.log(\"setupUserVault initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupUserVault caught error\", e);\n    }\n  };\n\n  const checkUserVaultStatus = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const checkUserCollectionStatus = async () => {\n    console.log(\"---- calling checkUserCollectionStatus ----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(checkCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    console.log(\"scriptCode\", scriptCode);\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const setupUserCollection = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const {\n      authorization\n    } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const initCode = await generateCode(setupNFTCollection, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress\n    });\n\n    try {\n      const initResponse = await fcl.send([sdk.transaction`${initCode}`, fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n        node: \"http://localhost:8080\"\n      });\n      console.log(\"setupNFTCollection initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupNFTCollection caught error\", e);\n    }\n  };\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }, walletNotConnected && __jsx(CoralButton, {\n    onClick: fcl.authenticate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }), walletConnected && !vaultIsSetup && __jsx(CoralButton, {\n    onClick: setupUserVault,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, \"Setup Vault\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }), walletConnected && !collectionIsSetup && __jsx(CoralButton, {\n    onClick: setupUserCollection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, \"Setup Collection\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }), walletConnected && vaultIsSetup && __jsx(CoralButton, {\n    onClick: getUserBalance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, \"Get User Balance\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }), walletConnected && collectionIsSetup && __jsx(CoralButton, {\n    onClick: getUserCollection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, \"Get User Collection\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }), walletConnected && __jsx(\"div\", {\n    style: {\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, __jsx(JSONPretty, {\n    id: \"json-pretty\",\n    data: walletUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default WalletSettings;","map":{"version":3,"sources":["/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js"],"names":["React","useState","useEffect","sdk","JSONPretty","CoralButton","MintButton","GradientButton","checkReference","checkCollection","vaultBalance","getCollectionItems","userVault","setupNFTCollection","fcl","WHITE","LIGHT_CORAL","MAGIC_MINT","Container","display","flexDirection","borderRadius","backgroundColor","boxShadow","padding","WalletSettings","walletUser","setWalletUser","vaultIsSetup","setVaultIsSetup","collectionIsSetup","setCollectionIsSetup","currentUser","subscribe","user","loggedIn","vaultStatus","checkUserVaultStatus","console","log","collectionStatus","checkUserCollectionStatus","walletConnected","walletNotConnected","getAddress","nullPrefix","addr","generateCode","rawCode","match","query","replace","item","getUserBalance","snapshot","address","contractAddress","scriptCode","script","response","send","balance","decode","getUserCollection","items","setupUserVault","authorization","initCode","initResponse","transaction","proposer","payer","authorizations","limit","node","e","checkResult","setupUserCollection","authenticate","fontSize"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,KAAKC,GAAZ,MAAqB,aAArB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,cAAP,MAA2B,sCAA3B;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,eAAP,MAA4B,yCAA5B;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,OAAOC,kBAAP,MAA+B,6CAA/B;AACA,OAAOC,SAAP,MAAsB,wCAAtB;AACA,OAAOC,kBAAP,MAA+B,kDAA/B;AAEA,OAAO,KAAKC,GAAZ,MAAqB,aAArB;AACA,SAASC,KAAT,EAAgBC,WAAhB,EAA6BC,UAA7B,QAA+C,eAA/C;;AAEA,MAAMC,SAAS,GAAG,qBAAO,KAAP;AAAA;AAAA;AAAA,GAAc;AAC9BC,EAAAA,OAAO,EAAE,MADqB;AAE9BC,EAAAA,aAAa,EAAE,QAFe;AAG9BC,EAAAA,YAAY,EAAE,CAHgB;AAI9BC,EAAAA,eAAe,EAAEP,KAJa;AAK9BQ,EAAAA,SAAS,EAAE,4BALmB;AAM9BC,EAAAA,OAAO,EAAE;AANqB,CAAd,qrWAAlB;;AASA,MAAMC,cAAc,GAAG,MAAM;AAC3B,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8B1B,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM;AAAA,OAAC2B,YAAD;AAAA,OAAeC;AAAf,MAAkC5B,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM;AAAA,OAAC6B,iBAAD;AAAA,OAAoBC;AAApB,MAA4C9B,QAAQ,CAAC,KAAD,CAA1D;AAEAC,EAAAA,SAAS,CACP,MACEY,GAAG,CAACkB,WAAJ,GAAkBC,SAAlB,CAA4B,MAAOC,IAAP,IAAgB;AAC1C,QAAIA,IAAI,CAACC,QAAT,EAAmB;AACjBR,MAAAA,aAAa,CAACO,IAAD,CAAb,CADiB,CAEjB;;AACA,YAAME,WAAW,GAAG,MAAMC,oBAAoB,EAA9C;AACAR,MAAAA,eAAe,CAACO,WAAD,CAAf;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BX,YAA5B;AACA,YAAMY,gBAAgB,GAAG,MAAMC,yBAAyB,EAAxD;AACAV,MAAAA,oBAAoB,CAACS,gBAAD,CAApB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCC,gBAAhC;AACD,KATD,MASO;AACLF,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACD;AACF,GAbD,CAFK,EAgBP,EAhBO,CAAT;AAmBA,QAAMG,eAAe,GAAGhB,UAAU,IAAIA,UAAU,CAACS,QAAjD;AACA,QAAMQ,kBAAkB,GACtBjB,UAAU,KAAK,IAAf,IAAwBA,UAAU,IAAI,CAACA,UAAU,CAACS,QADpD;;AAGA,QAAMS,UAAU,GAAG,CAACV,IAAD,EAAOW,UAAU,GAAG,IAApB,KAA6B;AAC9C,WAAOA,UAAU,GAAI,KAAIX,IAAI,CAACY,IAAK,EAAlB,GAAsBZ,IAAI,CAACY,IAA5C;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAG,OAAOC,OAAP,EAAgBC,KAAhB,KAA0B;AAC7C,QAAI,CAACA,KAAL,EAAY;AACV,aAAOD,OAAP;AACD;;AACD,UAAM;AAAEE,MAAAA;AAAF,QAAYD,KAAlB;AACA,WAAOD,OAAO,CAACG,OAAR,CAAgBD,KAAhB,EAAwBE,IAAD,IAAU;AACtC,aAAOH,KAAK,CAACG,IAAD,CAAZ;AACD,KAFM,CAAP;AAGD,GARD;;AAUA,QAAMC,cAAc,GAAG,YAAY;AACjCf,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,UAAML,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAMsB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMC,UAAU,GAAG,MAAMV,YAAY,CAACrC,YAAD,EAAe;AAClDwC,MAAAA,KAAK,EAAE,cAD2C;AAElD,cAAQM,eAF0C;AAGlD,cAAQD;AAH0C,KAAf,CAArC;AAKA,UAAMG,MAAM,GAAGvD,GAAG,CAACuD,MAAO,GAAED,UAAW,EAAvC;AACA,UAAME,QAAQ,GAAG,MAAM7C,GAAG,CAAC8C,IAAJ,CAAS,CAACF,MAAD,CAAT,CAAvB;AACA,UAAMG,OAAO,GAAG,MAAM/C,GAAG,CAACgD,MAAJ,CAAWH,QAAX,CAAtB;AACArB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBsB,OAAvB;AACAvB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD,GAjBD;;AAmBA,QAAMwB,iBAAiB,GAAG,YAAY;AACpCzB,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,UAAML,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAMsB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMC,UAAU,GAAG,MAAMV,YAAY,CAACpC,kBAAD,EAAqB;AACxDuC,MAAAA,KAAK,EAAE,cADiD;AAExD,cAAQM,eAFgD;AAGxD,cAAQD;AAHgD,KAArB,CAArC;AAKA,UAAMG,MAAM,GAAGvD,GAAG,CAACuD,MAAO,GAAED,UAAW,EAAvC;AACA,UAAME,QAAQ,GAAG,MAAM7C,GAAG,CAAC8C,IAAJ,CAAS,CAACF,MAAD,CAAT,CAAvB;AACA,UAAMM,KAAK,GAAG,MAAMlD,GAAG,CAACgD,MAAJ,CAAWH,QAAX,CAApB;AACArB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqByB,KAArB;AACA1B,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD,GAlBD;;AAoBA,QAAM0B,cAAc,GAAG,YAAY;AACjC;AACA,UAAM/B,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAM;AAAEkC,MAAAA;AAAF,QAAoBhC,IAA1B;AACA,UAAMoB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMW,QAAQ,GAAG,MAAMpB,YAAY,CAACnC,SAAD,EAAY;AAC7CsC,MAAAA,KAAK,EAAE,SADsC;AAE7C,cAAQM;AAFqC,KAAZ,CAAnC;;AAIA,QAAI;AACF,YAAMY,YAAY,GAAG,MAAMtD,GAAG,CAAC8C,IAAJ,CACzB,CACEzD,GAAG,CAACkE,WAAY,GAAEF,QAAS,EAD7B,EAEErD,GAAG,CAACwD,QAAJ,CAAaJ,aAAb,CAFF,EAGEpD,GAAG,CAACyD,KAAJ,CAAUL,aAAV,CAHF,EAIEpD,GAAG,CAAC0D,cAAJ,CAAmB,CAACN,aAAD,CAAnB,CAJF,EAKEpD,GAAG,CAAC2D,KAAJ,CAAU,GAAV,CALF,CADyB,EAQzB;AACEC,QAAAA,IAAI,EAAE;AADR,OARyB,CAA3B;AAYApC,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2C6B,YAA3C;AACD,KAdD,CAcE,OAAOO,CAAP,EAAU;AACVrC,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CoC,CAA3C;AACD;AACF,GA5BD;;AA8BA,QAAMtC,oBAAoB,GAAG,YAAY;AACvC,UAAMH,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAMsB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMC,UAAU,GAAG,MAAMV,YAAY,CAACvC,cAAD,EAAiB;AACpD0C,MAAAA,KAAK,EAAE,cAD6C;AAEpD,cAAQM,eAF4C;AAGpD,cAAQD;AAH4C,KAAjB,CAArC;AAKA,UAAMG,MAAM,GAAGvD,GAAG,CAACuD,MAAO,GAAED,UAAW,EAAvC;AACA,UAAME,QAAQ,GAAG,MAAM7C,GAAG,CAAC8C,IAAJ,CAAS,CAACF,MAAD,CAAT,CAAvB;AACA,UAAMkB,WAAW,GAAG,MAAM9D,GAAG,CAACgD,MAAJ,CAAWH,QAAX,CAA1B;AACA,WAAOiB,WAAP;AACD,GAdD;;AAgBA,QAAMnC,yBAAyB,GAAG,YAAY;AAC5CH,IAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACA,UAAML,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAMsB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMC,UAAU,GAAG,MAAMV,YAAY,CAACtC,eAAD,EAAkB;AACrDyC,MAAAA,KAAK,EAAE,cAD8C;AAErD,cAAQM,eAF6C;AAGrD,cAAQD;AAH6C,KAAlB,CAArC;AAMAjB,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BkB,UAA1B;AACA,UAAMC,MAAM,GAAGvD,GAAG,CAACuD,MAAO,GAAED,UAAW,EAAvC;AACA,UAAME,QAAQ,GAAG,MAAM7C,GAAG,CAAC8C,IAAJ,CAAS,CAACF,MAAD,CAAT,CAAvB;AACA,UAAMkB,WAAW,GAAG,MAAM9D,GAAG,CAACgD,MAAJ,CAAWH,QAAX,CAA1B;AACA,WAAOiB,WAAP;AACD,GAjBD;;AAmBA,QAAMC,mBAAmB,GAAG,YAAY;AACtC;AACA,UAAM3C,IAAI,GAAGpB,GAAG,CAACkB,WAAJ,EAAb;AACA,UAAM;AAAEkC,MAAAA;AAAF,QAAoBhC,IAA1B;AACA,UAAMoB,QAAQ,GAAG,MAAMpB,IAAI,CAACoB,QAAL,EAAvB;AACA,UAAMC,OAAO,GAAGX,UAAU,CAACU,QAAD,CAA1B;AACA,UAAME,eAAe,GAAG,oBAAxB;AACA,UAAMW,QAAQ,GAAG,MAAMpB,YAAY,CAAClC,kBAAD,EAAqB;AACtDqC,MAAAA,KAAK,EAAE,SAD+C;AAEtD,cAAQM;AAF8C,KAArB,CAAnC;;AAIA,QAAI;AACF,YAAMY,YAAY,GAAG,MAAMtD,GAAG,CAAC8C,IAAJ,CACzB,CACEzD,GAAG,CAACkE,WAAY,GAAEF,QAAS,EAD7B,EAEErD,GAAG,CAACwD,QAAJ,CAAaJ,aAAb,CAFF,EAGEpD,GAAG,CAACyD,KAAJ,CAAUL,aAAV,CAHF,EAIEpD,GAAG,CAAC0D,cAAJ,CAAmB,CAACN,aAAD,CAAnB,CAJF,EAKEpD,GAAG,CAAC2D,KAAJ,CAAU,GAAV,CALF,CADyB,EAQzB;AACEC,QAAAA,IAAI,EAAE;AADR,OARyB,CAA3B;AAYApC,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+C6B,YAA/C;AACD,KAdD,CAcE,OAAOO,CAAP,EAAU;AACVrC,MAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CoC,CAA/C;AACD;AACF,GA5BD;;AA8BA,SACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhC,kBAAkB,IACjB,MAAC,WAAD;AAAa,IAAA,OAAO,EAAE7B,GAAG,CAACgE,YAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAMGpC,eAAe,IAAI,CAACd,YAApB,IACC,MAAC,WAAD;AAAa,IAAA,OAAO,EAAEqC,cAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAPJ,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAWGvB,eAAe,IAAI,CAACZ,iBAApB,IACC,MAAC,WAAD;AAAa,IAAA,OAAO,EAAE+C,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAZJ,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,EAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,EAkBGnC,eAAe,IAAId,YAAnB,IACC,MAAC,WAAD;AAAa,IAAA,OAAO,EAAEyB,cAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAnBJ,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,EAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,EAuBGX,eAAe,IAAIZ,iBAAnB,IACC,MAAC,WAAD;AAAa,IAAA,OAAO,EAAEiC,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAxBJ,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BF,EA6BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7BF,EA8BGrB,eAAe,IACd;AAAK,IAAA,KAAK,EAAE;AAAEqC,MAAAA,QAAQ,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAY,IAAA,EAAE,EAAC,aAAf;AAA6B,IAAA,IAAI,EAAErD,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CA/BJ,CADF,CADF;AAwCD,CAxND;;AA0NA,eAAeD,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport getCollectionItems from \"../../flow/scripts/get-collection-items.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport styled from \"@emotion/styled\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nconst Container = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\",\n});\n\nconst WalletSettings = () => {\n  const [walletUser, setWalletUser] = useState(null);\n  const [vaultIsSetup, setVaultIsSetup] = useState(false);\n  const [collectionIsSetup, setCollectionIsSetup] = useState(false);\n\n  useEffect(\n    () =>\n      fcl.currentUser().subscribe(async (user) => {\n        if (user.loggedIn) {\n          setWalletUser(user);\n          // Check if the wallet is set up yet\n          const vaultStatus = await checkUserVaultStatus();\n          setVaultIsSetup(vaultStatus);\n          console.log(\"vaultIsSetup\", vaultIsSetup);\n          const collectionStatus = await checkUserCollectionStatus();\n          setCollectionIsSetup(collectionStatus);\n          console.log(\"collectionStatus\", collectionStatus);\n        } else {\n          console.log(\"is not logged in\");\n        }\n      }),\n    []\n  );\n\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected =\n    walletUser === null || (walletUser && !walletUser.loggedIn);\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n    const { query } = match;\n    return rawCode.replace(query, (item) => {\n      return match[item];\n    });\n  };\n\n  const getUserBalance = async () => {\n    console.log(\"checking user balance\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(vaultBalance, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const balance = await fcl.decode(response);\n    console.log(\"---------------\");\n    console.log(\"balance\", balance);\n    console.log(\"---------------\");\n  };\n\n  const getUserCollection = async () => {\n    console.log(\"calling getUserCollection\");\n    console.log(\"checking user balance\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(getCollectionItems, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const items = await fcl.decode(response);\n    console.log(\"---------------\");\n    console.log(\"items\", items);\n    console.log(\"---------------\");\n  };\n\n  const setupUserVault = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(userVault, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupUserVault initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupUserVault caught error\", e);\n    }\n  };\n\n  const checkUserVaultStatus = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const checkUserCollectionStatus = async () => {\n    console.log(\"---- calling checkUserCollectionStatus ----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(checkCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n\n    console.log(\"scriptCode\", scriptCode);\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const setupUserCollection = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const initCode = await generateCode(setupNFTCollection, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupNFTCollection initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupNFTCollection caught error\", e);\n    }\n  };\n\n  return (\n    <Container>\n      <div>\n        {walletNotConnected && (\n          <CoralButton onClick={fcl.authenticate}>Connect Wallet</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !vaultIsSetup && (\n          <CoralButton onClick={setupUserVault}>Setup Vault</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !collectionIsSetup && (\n          <CoralButton onClick={setupUserCollection}>\n            Setup Collection\n          </CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && vaultIsSetup && (\n          <CoralButton onClick={getUserBalance}>Get User Balance</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && collectionIsSetup && (\n          <CoralButton onClick={getUserCollection}>\n            Get User Collection\n          </CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && (\n          <div style={{ fontSize: 14 }}>\n            <JSONPretty id=\"json-pretty\" data={walletUser}></JSONPretty>\n          </div>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default WalletSettings;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _styled from \"@emotion/styled-base\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nvar Container = /*#__PURE__*/_styled(\"div\", {\n  target: \"e1fz02ct0\",\n  label: \"Container\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\"\n}, false ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZWtCIiwiZmlsZSI6Ii9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgc2RrIGZyb20gXCJAb25mbG93L3Nka1wiO1xuaW1wb3J0IEpTT05QcmV0dHkgZnJvbSBcInJlYWN0LWpzb24tcHJldHR5XCI7XG5pbXBvcnQgQ29yYWxCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9jb3JhbFwiO1xuaW1wb3J0IE1pbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9taW50XCI7XG5pbXBvcnQgR3JhZGllbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9ncmFkaWVudFwiO1xuaW1wb3J0IGNoZWNrUmVmZXJlbmNlIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvY2hlY2stcmVmLmNkY1wiO1xuaW1wb3J0IGNoZWNrQ29sbGVjdGlvbiBmcm9tIFwiLi4vLi4vZmxvdy9zY3JpcHRzL2NoZWNrLWNvbGxlY3Rpb24uY2RjXCI7XG5pbXBvcnQgdmF1bHRCYWxhbmNlIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvdmF1bHQtYmFsYW5jZS5jZGNcIjtcbmltcG9ydCB1c2VyVmF1bHQgZnJvbSBcIi4uLy4uL2Zsb3cvdHJhbnNhY3Rpb25zL3VzZXItdmF1bHQuY2RjXCI7XG5pbXBvcnQgc2V0dXBORlRDb2xsZWN0aW9uIGZyb20gXCIuLi8uLi9mbG93L3RyYW5zYWN0aW9ucy9zZXR1cC1uZnQtY29sbGVjdGlvbi5jZGNcIjtcbmltcG9ydCBzdHlsZWQgZnJvbSBcIkBlbW90aW9uL3N0eWxlZFwiO1xuaW1wb3J0ICogYXMgZmNsIGZyb20gXCJAb25mbG93L2ZjbFwiO1xuaW1wb3J0IHsgV0hJVEUsIExJR0hUX0NPUkFMLCBNQUdJQ19NSU5UIH0gZnJvbSBcIkBzdHlsZS9jb2xvcnNcIjtcblxuY29uc3QgQ29udGFpbmVyID0gc3R5bGVkKFwiZGl2XCIpKHtcbiAgZGlzcGxheTogXCJmbGV4XCIsXG4gIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gIGJvcmRlclJhZGl1czogMyxcbiAgYmFja2dyb3VuZENvbG9yOiBXSElURSxcbiAgYm94U2hhZG93OiBcIjAgMXB4IDJweCAwIHJnYmEoMCwwLDAsLjEpXCIsXG4gIHBhZGRpbmc6IFwiMXJlbVwiLFxufSk7XG5cbmNvbnN0IFdhbGxldFNldHRpbmdzID0gKCkgPT4ge1xuICBjb25zdCBbd2FsbGV0VXNlciwgc2V0V2FsbGV0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3ZhdWx0SXNTZXR1cCwgc2V0VmF1bHRJc1NldHVwXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NvbGxlY3Rpb25Jc1NldHVwLCBzZXRDb2xsZWN0aW9uSXNTZXR1cF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KFxuICAgICgpID0+XG4gICAgICBmY2wuY3VycmVudFVzZXIoKS5zdWJzY3JpYmUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICAgICAgaWYgKHVzZXIubG9nZ2VkSW4pIHtcbiAgICAgICAgICBzZXRXYWxsZXRVc2VyKHVzZXIpO1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB3YWxsZXQgaXMgc2V0IHVwIHlldFxuICAgICAgICAgIGNvbnN0IHZhdWx0U3RhdHVzID0gYXdhaXQgY2hlY2tVc2VyVmF1bHRTdGF0dXMoKTtcbiAgICAgICAgICBzZXRWYXVsdElzU2V0dXAodmF1bHRTdGF0dXMpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwidmF1bHRJc1NldHVwXCIsIHZhdWx0SXNTZXR1cCk7XG4gICAgICAgICAgY29uc3QgY29sbGVjdGlvblN0YXR1cyA9IGF3YWl0IGNoZWNrVXNlckNvbGxlY3Rpb25TdGF0dXMoKTtcbiAgICAgICAgICBzZXRDb2xsZWN0aW9uSXNTZXR1cChjb2xsZWN0aW9uSXNTZXR1cCk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJjb2xsZWN0aW9uU3RhdHVzXCIsIGNvbGxlY3Rpb25TdGF0dXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXMgbm90IGxvZ2dlZCBpblwiKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgW11cbiAgKTtcblxuICBjb25zdCB3YWxsZXRDb25uZWN0ZWQgPSB3YWxsZXRVc2VyICYmIHdhbGxldFVzZXIubG9nZ2VkSW47XG4gIGNvbnN0IHdhbGxldE5vdENvbm5lY3RlZCA9XG4gICAgd2FsbGV0VXNlciA9PT0gbnVsbCB8fCAod2FsbGV0VXNlciAmJiAhd2FsbGV0VXNlci5sb2dnZWRJbik7XG5cbiAgY29uc3QgZ2V0QWRkcmVzcyA9ICh1c2VyLCBudWxsUHJlZml4ID0gdHJ1ZSkgPT4ge1xuICAgIHJldHVybiBudWxsUHJlZml4ID8gYDB4JHt1c2VyLmFkZHJ9YCA6IHVzZXIuYWRkcjtcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0ZUNvZGUgPSBhc3luYyAocmF3Q29kZSwgbWF0Y2gpID0+IHtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gcmF3Q29kZTtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSB9ID0gbWF0Y2g7XG4gICAgcmV0dXJuIHJhd0NvZGUucmVwbGFjZShxdWVyeSwgKGl0ZW0pID0+IHtcbiAgICAgIHJldHVybiBtYXRjaFtpdGVtXTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyQmFsYW5jZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImNoZWNraW5nIHVzZXIgYmFsYW5jZVwiKTtcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHgwMWNmMGUyZjJmNzE1NDUwXCI7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZSh2YXVsdEJhbGFuY2UsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICBjb25zb2xlLmxvZyhcImJhbGFuY2VcIiwgYmFsYW5jZSk7XG4gICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS1cIik7XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBVc2VyVmF1bHQgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIHRoZSB1c2VyIHZhdWx0XG4gICAgY29uc3QgdXNlciA9IGZjbC5jdXJyZW50VXNlcigpO1xuICAgIGNvbnN0IHsgYXV0aG9yaXphdGlvbiB9ID0gdXNlcjtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweDAxY2YwZTJmMmY3MTU0NTBcIjtcbiAgICBjb25zdCBpbml0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZSh1c2VyVmF1bHQsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW5pdFJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoXG4gICAgICAgIFtcbiAgICAgICAgICBzZGsudHJhbnNhY3Rpb25gJHtpbml0Q29kZX1gLFxuICAgICAgICAgIGZjbC5wcm9wb3NlcihhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICBmY2wucGF5ZXIoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgZmNsLmF1dGhvcml6YXRpb25zKFthdXRob3JpemF0aW9uXSksXG4gICAgICAgICAgZmNsLmxpbWl0KDEwMCksXG4gICAgICAgIF0sXG4gICAgICAgIHtcbiAgICAgICAgICBub2RlOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJzZXR1cFVzZXJWYXVsdCBpbml0UmVzcG9uc2VcIiwgaW5pdFJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwVXNlclZhdWx0IGNhdWdodCBlcnJvclwiLCBlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tVc2VyVmF1bHRTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGZjbC5jdXJyZW50VXNlcigpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4MDFjZjBlMmYyZjcxNTQ1MFwiO1xuICAgIGNvbnN0IHNjcmlwdENvZGUgPSBhd2FpdCBnZW5lcmF0ZUNvZGUoY2hlY2tSZWZlcmVuY2UsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gYXdhaXQgZmNsLmRlY29kZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIGNoZWNrUmVzdWx0O1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrVXNlckNvbGxlY3Rpb25TdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCItLS0tIGNhbGxpbmcgY2hlY2tVc2VyQ29sbGVjdGlvblN0YXR1cyAtLS0tXCIpO1xuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweGYzZmNkMmMxYTc4ZjVlZWVcIjtcbiAgICBjb25zdCBzY3JpcHRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKGNoZWNrQ29sbGVjdGlvbiwge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICAgIFwiMHgwMlwiOiBhZGRyZXNzLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJzY3JpcHRDb2RlXCIsIHNjcmlwdENvZGUpO1xuICAgIGNvbnN0IHNjcmlwdCA9IHNkay5zY3JpcHRgJHtzY3JpcHRDb2RlfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChbc2NyaXB0XSk7XG4gICAgY29uc3QgY2hlY2tSZXN1bHQgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gY2hlY2tSZXN1bHQ7XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBVc2VyQ29sbGVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgdGhlIHVzZXIgdmF1bHRcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3QgeyBhdXRob3JpemF0aW9uIH0gPSB1c2VyO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4MDFjZjBlMmYyZjcxNTQ1MFwiO1xuICAgIGNvbnN0IGluaXRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKHNldHVwTkZUQ29sbGVjdGlvbiwge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICAgIFwiMHgwMlwiOiBhZGRyZXNzLFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpbml0UmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChcbiAgICAgICAgW1xuICAgICAgICAgIHNkay50cmFuc2FjdGlvbmAke2luaXRDb2RlfWAsXG4gICAgICAgICAgZmNsLnByb3Bvc2VyKGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgIGZjbC5wYXllcihhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICBmY2wuYXV0aG9yaXphdGlvbnMoW2F1dGhvcml6YXRpb25dKSxcbiAgICAgICAgICBmY2wubGltaXQoMTAwKSxcbiAgICAgICAgXSxcbiAgICAgICAge1xuICAgICAgICAgIG5vZGU6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwTkZUQ29sbGVjdGlvbiBpbml0UmVzcG9uc2VcIiwgaW5pdFJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwTkZUQ29sbGVjdGlvbiBjYXVnaHQgZXJyb3JcIiwgZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHt3YWxsZXROb3RDb25uZWN0ZWQgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtmY2wuYXV0aGVudGljYXRlfT5Db25uZWN0IFdhbGxldDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiAhdmF1bHRJc1NldHVwICYmIChcbiAgICAgICAgICA8Q29yYWxCdXR0b24gb25DbGljaz17c2V0dXBVc2VyVmF1bHR9PlNldHVwIFZhdWx0PC9Db3JhbEJ1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxiciAvPlxuICAgICAgICB7d2FsbGV0Q29ubmVjdGVkICYmICFjb2xsZWN0aW9uSXNTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e3NldHVwVXNlckNvbGxlY3Rpb259PlxuICAgICAgICAgICAgU2V0dXAgQ29sbGVjdGlvblxuICAgICAgICAgIDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiB2YXVsdElzU2V0dXAgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtnZXRVc2VyQmFsYW5jZX0+R2V0IFVzZXIgQmFsYW5jZTwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiBjb2xsZWN0aW9uSXNTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e2NoZWNrVXNlckNvbGxlY3Rpb259PlxuICAgICAgICAgICAgQ2hlY2sgVXNlciBCYWxhbmNlXG4gICAgICAgICAgPC9Db3JhbEJ1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxiciAvPlxuICAgICAgICB7d2FsbGV0Q29ubmVjdGVkICYmIChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNCB9fT5cbiAgICAgICAgICAgIDxKU09OUHJldHR5IGlkPVwianNvbi1wcmV0dHlcIiBkYXRhPXt3YWxsZXRVc2VyfT48L0pTT05QcmV0dHk+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L0NvbnRhaW5lcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdhbGxldFNldHRpbmdzO1xuIl19 */\");\n\nvar WalletSettings = function WalletSettings() {\n  _s();\n\n  var _useState = useState(null),\n      walletUser = _useState[0],\n      setWalletUser = _useState[1];\n\n  var _useState2 = useState(false),\n      vaultIsSetup = _useState2[0],\n      setVaultIsSetup = _useState2[1];\n\n  var _useState3 = useState(false),\n      collectionIsSetup = _useState3[0],\n      setCollectionIsSetup = _useState3[1];\n\n  useEffect(function () {\n    return fcl.currentUser().subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n        var vaultStatus, collectionStatus;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!user.loggedIn) {\n                  _context.next = 14;\n                  break;\n                }\n\n                setWalletUser(user); // Check if the wallet is set up yet\n\n                _context.next = 4;\n                return checkUserVaultStatus();\n\n              case 4:\n                vaultStatus = _context.sent;\n                setVaultIsSetup(vaultStatus);\n                console.log(\"vaultIsSetup\", vaultIsSetup);\n                _context.next = 9;\n                return checkUserCollectionStatus();\n\n              case 9:\n                collectionStatus = _context.sent;\n                setCollectionIsSetup(collectionIsSetup);\n                console.log(\"collectionStatus\", collectionStatus);\n                _context.next = 15;\n                break;\n\n              case 14:\n                console.log(\"is not logged in\");\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }, []);\n  var walletConnected = walletUser && walletUser.loggedIn;\n  var walletNotConnected = walletUser === null || walletUser && !walletUser.loggedIn;\n\n  var getAddress = function getAddress(user) {\n    var nullPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    return nullPrefix ? \"0x\".concat(user.addr) : user.addr;\n  };\n\n  var generateCode = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(rawCode, match) {\n      var query;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (match) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", rawCode);\n\n            case 2:\n              query = match.query;\n              return _context2.abrupt(\"return\", rawCode.replace(query, function (item) {\n                return match[item];\n              }));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function generateCode(_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getUserBalance = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var user, snapshot, address, contractAddress, scriptCode, script, response, balance;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(\"checking user balance\");\n              user = fcl.currentUser();\n              _context3.next = 4;\n              return user.snapshot();\n\n            case 4:\n              snapshot = _context3.sent;\n              address = getAddress(snapshot);\n              contractAddress = \"0x01cf0e2f2f715450\";\n              _context3.next = 9;\n              return generateCode(vaultBalance, {\n                query: /(0x01|0x02)/g,\n                \"0x01\": contractAddress,\n                \"0x02\": address\n              });\n\n            case 9:\n              scriptCode = _context3.sent;\n              script = sdk.script(_templateObject(), scriptCode);\n              _context3.next = 13;\n              return fcl.send([script]);\n\n            case 13:\n              response = _context3.sent;\n              _context3.next = 16;\n              return fcl.decode(response);\n\n            case 16:\n              balance = _context3.sent;\n              console.log(\"---------------\");\n              console.log(\"balance\", balance);\n              console.log(\"---------------\");\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getUserBalance() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var setupUserVault = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var user, authorization, snapshot, address, contractAddress, initCode, initResponse;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              // Create the user vault\n              user = fcl.currentUser();\n              authorization = user.authorization;\n              _context4.next = 4;\n              return user.snapshot();\n\n            case 4:\n              snapshot = _context4.sent;\n              address = getAddress(snapshot);\n              contractAddress = \"0x01cf0e2f2f715450\";\n              _context4.next = 9;\n              return generateCode(userVault, {\n                query: /(0x01|0x02)/g,\n                \"0x01\": contractAddress,\n                \"0x02\": address\n              });\n\n            case 9:\n              initCode = _context4.sent;\n              _context4.prev = 10;\n              _context4.next = 13;\n              return fcl.send([sdk.transaction(_templateObject2(), initCode), fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n                node: \"http://localhost:8080\"\n              });\n\n            case 13:\n              initResponse = _context4.sent;\n              console.log(\"setupUserVault initResponse\", initResponse);\n              _context4.next = 20;\n              break;\n\n            case 17:\n              _context4.prev = 17;\n              _context4.t0 = _context4[\"catch\"](10);\n              console.log(\"setupUserVault caught error\", _context4.t0);\n\n            case 20:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[10, 17]]);\n    }));\n\n    return function setupUserVault() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var checkUserVaultStatus = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var user, snapshot, address, contractAddress, scriptCode, script, response, checkResult;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              user = fcl.currentUser();\n              _context5.next = 3;\n              return user.snapshot();\n\n            case 3:\n              snapshot = _context5.sent;\n              address = getAddress(snapshot);\n              contractAddress = \"0x01cf0e2f2f715450\";\n              _context5.next = 8;\n              return generateCode(checkReference, {\n                query: /(0x01|0x02)/g,\n                \"0x01\": contractAddress,\n                \"0x02\": address\n              });\n\n            case 8:\n              scriptCode = _context5.sent;\n              script = sdk.script(_templateObject3(), scriptCode);\n              _context5.next = 12;\n              return fcl.send([script]);\n\n            case 12:\n              response = _context5.sent;\n              _context5.next = 15;\n              return fcl.decode(response);\n\n            case 15:\n              checkResult = _context5.sent;\n              return _context5.abrupt(\"return\", checkResult);\n\n            case 17:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function checkUserVaultStatus() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var checkUserCollectionStatus = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var user, snapshot, address, contractAddress, scriptCode, script, response, checkResult;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              console.log(\"---- calling checkUserCollectionStatus ----\");\n              user = fcl.currentUser();\n              _context6.next = 4;\n              return user.snapshot();\n\n            case 4:\n              snapshot = _context6.sent;\n              address = getAddress(snapshot);\n              contractAddress = \"0xf3fcd2c1a78f5eee\";\n              _context6.next = 9;\n              return generateCode(checkCollection, {\n                query: /(0x01|0x02)/g,\n                \"0x01\": contractAddress,\n                \"0x02\": address\n              });\n\n            case 9:\n              scriptCode = _context6.sent;\n              console.log(\"scriptCode\", scriptCode);\n              script = sdk.script(_templateObject4(), scriptCode);\n              _context6.next = 14;\n              return fcl.send([script]);\n\n            case 14:\n              response = _context6.sent;\n              _context6.next = 17;\n              return fcl.decode(response);\n\n            case 17:\n              checkResult = _context6.sent;\n              return _context6.abrupt(\"return\", checkResult);\n\n            case 19:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function checkUserCollectionStatus() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var setupUserCollection = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var user, authorization, snapshot, address, contractAddress, initCode, initResponse;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // Create the user vault\n              user = fcl.currentUser();\n              authorization = user.authorization;\n              _context7.next = 4;\n              return user.snapshot();\n\n            case 4:\n              snapshot = _context7.sent;\n              address = getAddress(snapshot);\n              contractAddress = \"0x01cf0e2f2f715450\";\n              _context7.next = 9;\n              return generateCode(setupNFTCollection, {\n                query: /(0x01|0x02)/g,\n                \"0x01\": contractAddress,\n                \"0x02\": address\n              });\n\n            case 9:\n              initCode = _context7.sent;\n              _context7.prev = 10;\n              _context7.next = 13;\n              return fcl.send([sdk.transaction(_templateObject5(), initCode), fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n                node: \"http://localhost:8080\"\n              });\n\n            case 13:\n              initResponse = _context7.sent;\n              console.log(\"setupNFTCollection initResponse\", initResponse);\n              _context7.next = 20;\n              break;\n\n            case 17:\n              _context7.prev = 17;\n              _context7.t0 = _context7[\"catch\"](10);\n              console.log(\"setupNFTCollection caught error\", _context7.t0);\n\n            case 20:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[10, 17]]);\n    }));\n\n    return function setupUserCollection() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, walletNotConnected && __jsx(CoralButton, {\n    onClick: fcl.authenticate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }), walletConnected && !vaultIsSetup && __jsx(CoralButton, {\n    onClick: setupUserVault,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, \"Setup Vault\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }), walletConnected && !collectionIsSetup && __jsx(CoralButton, {\n    onClick: setupUserCollection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, \"Setup Collection\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }), walletConnected && vaultIsSetup && __jsx(CoralButton, {\n    onClick: getUserBalance,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, \"Get User Balance\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }), walletConnected && collectionIsSetup && __jsx(CoralButton, {\n    onClick: checkUserCollection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, \"Check User Balance\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }), walletConnected && __jsx(\"div\", {\n    style: {\n      fontSize: 14\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, __jsx(JSONPretty, {\n    id: \"json-pretty\",\n    data: walletUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }))));\n};\n\n_s(WalletSettings, \"vLT/qR5R7zF+wVtPDa0g7+M3V70=\");\n\n_c = WalletSettings;\nexport default WalletSettings;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletSettings\");","map":{"version":3,"sources":["/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js"],"names":["React","useState","useEffect","sdk","JSONPretty","CoralButton","MintButton","GradientButton","checkReference","checkCollection","vaultBalance","userVault","setupNFTCollection","fcl","WHITE","LIGHT_CORAL","MAGIC_MINT","Container","display","flexDirection","borderRadius","backgroundColor","boxShadow","padding","WalletSettings","walletUser","setWalletUser","vaultIsSetup","setVaultIsSetup","collectionIsSetup","setCollectionIsSetup","currentUser","subscribe","user","loggedIn","checkUserVaultStatus","vaultStatus","console","log","checkUserCollectionStatus","collectionStatus","walletConnected","walletNotConnected","getAddress","nullPrefix","addr","generateCode","rawCode","match","query","replace","item","getUserBalance","snapshot","address","contractAddress","scriptCode","script","send","response","decode","balance","setupUserVault","authorization","initCode","transaction","proposer","payer","authorizations","limit","node","initResponse","checkResult","setupUserCollection","authenticate","checkUserCollection","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport styled from \"@emotion/styled\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nconst Container = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\",\n});\n\nconst WalletSettings = () => {\n  const [walletUser, setWalletUser] = useState(null);\n  const [vaultIsSetup, setVaultIsSetup] = useState(false);\n  const [collectionIsSetup, setCollectionIsSetup] = useState(false);\n\n  useEffect(\n    () =>\n      fcl.currentUser().subscribe(async (user) => {\n        if (user.loggedIn) {\n          setWalletUser(user);\n          // Check if the wallet is set up yet\n          const vaultStatus = await checkUserVaultStatus();\n          setVaultIsSetup(vaultStatus);\n          console.log(\"vaultIsSetup\", vaultIsSetup);\n          const collectionStatus = await checkUserCollectionStatus();\n          setCollectionIsSetup(collectionIsSetup);\n          console.log(\"collectionStatus\", collectionStatus);\n        } else {\n          console.log(\"is not logged in\");\n        }\n      }),\n    []\n  );\n\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected =\n    walletUser === null || (walletUser && !walletUser.loggedIn);\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n    const { query } = match;\n    return rawCode.replace(query, (item) => {\n      return match[item];\n    });\n  };\n\n  const getUserBalance = async () => {\n    console.log(\"checking user balance\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(vaultBalance, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const balance = await fcl.decode(response);\n    console.log(\"---------------\");\n    console.log(\"balance\", balance);\n    console.log(\"---------------\");\n  };\n\n  const setupUserVault = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(userVault, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupUserVault initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupUserVault caught error\", e);\n    }\n  };\n\n  const checkUserVaultStatus = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const checkUserCollectionStatus = async () => {\n    console.log(\"---- calling checkUserCollectionStatus ----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(checkCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n\n    console.log(\"scriptCode\", scriptCode);\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const setupUserCollection = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(setupNFTCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupNFTCollection initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupNFTCollection caught error\", e);\n    }\n  };\n\n  return (\n    <Container>\n      <div>\n        {walletNotConnected && (\n          <CoralButton onClick={fcl.authenticate}>Connect Wallet</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !vaultIsSetup && (\n          <CoralButton onClick={setupUserVault}>Setup Vault</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !collectionIsSetup && (\n          <CoralButton onClick={setupUserCollection}>\n            Setup Collection\n          </CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && vaultIsSetup && (\n          <CoralButton onClick={getUserBalance}>Get User Balance</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && collectionIsSetup && (\n          <CoralButton onClick={checkUserCollection}>\n            Check User Balance\n          </CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && (\n          <div style={{ fontSize: 14 }}>\n            <JSONPretty id=\"json-pretty\" data={walletUser}></JSONPretty>\n          </div>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default WalletSettings;\n"]},"metadata":{},"sourceType":"module"}
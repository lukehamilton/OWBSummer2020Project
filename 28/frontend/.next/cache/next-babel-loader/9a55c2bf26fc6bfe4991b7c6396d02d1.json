{"ast":null,"code":"import _styled from \"@emotion/styled-base\";\nvar _jsxFileName = \"/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nconst Container = /*#__PURE__*/_styled(\"div\", {\n  target: \"e1fz02ct0\",\n  label: \"Container\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\"\n}, false ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBV2tCIiwiZmlsZSI6Ii9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgc2RrIGZyb20gXCJAb25mbG93L3Nka1wiO1xuaW1wb3J0IEpTT05QcmV0dHkgZnJvbSBcInJlYWN0LWpzb24tcHJldHR5XCI7XG5pbXBvcnQgQ29yYWxCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9jb3JhbFwiO1xuaW1wb3J0IE1pbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9taW50XCI7XG5pbXBvcnQgR3JhZGllbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9ncmFkaWVudFwiO1xuaW1wb3J0IGNoZWNrUmVmZXJlbmNlIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvY2hlY2stcmVmLmNkY1wiO1xuaW1wb3J0IHN0eWxlZCBmcm9tIFwiQGVtb3Rpb24vc3R5bGVkXCI7XG5pbXBvcnQgKiBhcyBmY2wgZnJvbSBcIkBvbmZsb3cvZmNsXCI7XG5pbXBvcnQgeyBXSElURSwgTElHSFRfQ09SQUwsIE1BR0lDX01JTlQgfSBmcm9tIFwiQHN0eWxlL2NvbG9yc1wiO1xuXG5jb25zdCBDb250YWluZXIgPSBzdHlsZWQoXCJkaXZcIikoe1xuICBkaXNwbGF5OiBcImZsZXhcIixcbiAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgYm9yZGVyUmFkaXVzOiAzLFxuICBiYWNrZ3JvdW5kQ29sb3I6IFdISVRFLFxuICBib3hTaGFkb3c6IFwiMCAxcHggMnB4IDAgcmdiYSgwLDAsMCwuMSlcIixcbiAgcGFkZGluZzogXCIxcmVtXCIsXG59KTtcblxuY29uc3QgV2FsbGV0U2V0dGluZ3MgPSAoKSA9PiB7XG4gIGNvbnN0IFt3YWxsZXRVc2VyLCBzZXRXYWxsZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbd2FsbGV0SXNTZXR1cCwgc2V0V2FsbGV0SXNTZXR1cF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KFxuICAgICgpID0+XG4gICAgICBmY2wuY3VycmVudFVzZXIoKS5zdWJzY3JpYmUoYXN5bmMgKHVzZXIpID0+IHtcbiAgICAgICAgaWYgKHVzZXIubG9nZ2VkSW4pIHtcbiAgICAgICAgICBzZXRXYWxsZXRVc2VyKHVzZXIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXMgbG9nZ2VkIGluXCIpO1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB3YWxsZXQgaXMgc2V0IHVwIHlldFxuICAgICAgICAgIGNvbnN0IHdhbGxldFN0YXR1cyA9IGF3YWl0IGNoZWNrVXNlcldhbGxldFN0YXR1cygpO1xuICAgICAgICAgIHNldFdhbGxldElzU2V0dXAod2FsbGV0U3RhdHVzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIndhbGxldFN0YXR1c1wiLCB3YWxsZXRTdGF0dXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXMgbm90IGxvZ2dlZCBpblwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLSB1c2VyISAtLS0tLS0tLS0tLS0tXCIsIHVzZXIpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICB9KSxcbiAgICBbXVxuICApO1xuXG4gIGNvbnN0IHdhbGxldENvbm5lY3RlZCA9IHdhbGxldFVzZXIgJiYgd2FsbGV0VXNlci5sb2dnZWRJbjtcbiAgY29uc3Qgd2FsbGV0Tm90Q29ubmVjdGVkID1cbiAgICB3YWxsZXRVc2VyID09PSBudWxsIHx8ICh3YWxsZXRVc2VyICYmICF3YWxsZXRVc2VyLmxvZ2dlZEluKTtcblxuICBjb25zdCBoYW5kbGVHZXRBY2NvdW50ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiY2FsbGluZyBoYW5kbGVHZXRBY2NvdW50XCIpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2RrLnNlbmQoXG4gICAgICBhd2FpdCBzZGsucGlwZShhd2FpdCBzZGsuYnVpbGQoW3Nkay5nZXRBY2NvdW50KFwiMDFjZjBlMmYyZjcxNTQ1MFwiKV0pKSxcbiAgICAgIHsgbm9kZTogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIiB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tcmVzcG9uc2UtLVwiLCByZXNwb25zZSk7XG4gICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAvLyAgIHNldFJlc3VsdChhd2FpdCBzZGsuZGVjb2RlUmVzcG9uc2UocmVzcG9uc2UpKVxuICB9O1xuXG4gIGNvbnN0IGdldEFkZHJlc3MgPSAodXNlciwgbnVsbFByZWZpeCA9IHRydWUpID0+IHtcbiAgICByZXR1cm4gbnVsbFByZWZpeCA/IGAweCR7dXNlci5hZGRyfWAgOiB1c2VyLmFkZHI7XG4gIH07XG5cbiAgY29uc3QgZ2VuZXJhdGVDb2RlID0gYXN5bmMgKHJhd0NvZGUsIG1hdGNoKSA9PiB7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIHJhd0NvZGU7XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnkgfSA9IG1hdGNoO1xuICAgIHJldHVybiByYXdDb2RlLnJlcGxhY2UocXVlcnksIChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gbWF0Y2hbaXRlbV07XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlVXNlclZhdWx0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlVXNlclZhdWx0XCIpO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrVXNlcldhbGxldFN0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tIGNoZWNrVXNlcldhbGxldFN0YXR1cyAtLS0tLVwiKTtcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHgwMWNmMGUyZjJmNzE1NDUwXCI7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZShjaGVja1JlZmVyZW5jZSwge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICAgIFwiMHgwMlwiOiBhZGRyZXNzLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjcmlwdCA9IHNkay5zY3JpcHRgJHtzY3JpcHRDb2RlfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChbc2NyaXB0XSk7XG4gICAgY29uc3QgY2hlY2tSZXN1bHQgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gY2hlY2tSZXN1bHQ7XG4gIH07XG5cbiAgY29uc3QgcnVuVGVzdFNjcmlwdCA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFtcbiAgICAgIGZjbC5zY3JpcHRgXG4gICAgICAgICAgcHViIGZ1biBtYWluKCk6IEludCB7XG4gICAgICAgICAgICByZXR1cm4gNDIgKyA2XG4gICAgICAgICAgfVxuICAgICAgICBgLFxuICAgIF0pO1xuICAgIGNvbnNvbGUubG9nKFwicmVzcG9uc2VcIiwgcmVzcG9uc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHt3YWxsZXROb3RDb25uZWN0ZWQgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtmY2wuYXV0aGVudGljYXRlfT5Db25uZWN0IFdhbGxldDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIHt3YWxsZXRDb25uZWN0ZWQgJiYgIXdhbGxldElzU2V0dXAgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtmY2wuYXV0aGVudGljYXRlfT5Db25uZWN0IFdhbGxldDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIHsvKiB7d2FsbGV0Q29ubmVjdGVkICYmICF3YWxsZXRTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUNoZWNrUmVmfT5DaGVjayBSZWZlcmVuY2U8L0NvcmFsQnV0dG9uPlxuICAgICAgICApfSAqL31cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiAhd2FsbGV0U2V0dXAgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtydW5UZXN0U2NyaXB0fT5SdW4gVGVzdCBTY3JpcHQ8L0NvcmFsQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxiciAvPlxuICAgICAgICB7d2FsbGV0Q29ubmVjdGVkICYmIChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNCB9fT5cbiAgICAgICAgICAgIDxKU09OUHJldHR5IGlkPVwianNvbi1wcmV0dHlcIiBkYXRhPXt3YWxsZXRVc2VyfT48L0pTT05QcmV0dHk+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHsvKiA8R3JhZGllbnRCdXR0b24+e0xBQkVMfTwvR3JhZGllbnRCdXR0b24+ICovfVxuICAgICAgPC9kaXY+XG4gICAgPC9Db250YWluZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBXYWxsZXRTZXR0aW5ncztcblxue1xuICAvKiA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVHZXRBY2NvdW50fT5HZXQgQWNjb3VudDwvYnV0dG9uPlxuICAgICAgICAgICAgPHByZT57SlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKX08L3ByZT5cbiAgICAgICAgICA8L2Rpdj4gKi9cbn1cbiJdfQ== */\");\n\nconst WalletSettings = () => {\n  const {\n    0: walletUser,\n    1: setWalletUser\n  } = useState(null);\n  const {\n    0: walletIsSetup,\n    1: setWalletIsSetup\n  } = useState(false);\n  useEffect(() => fcl.currentUser().subscribe(async user => {\n    if (user.loggedIn) {\n      setWalletUser(user);\n      console.log(\"is logged in\"); // Check if the wallet is set up yet\n\n      const walletStatus = await checkUserWalletStatus();\n      setWalletIsSetup(walletStatus);\n      console.log(\"walletStatus\", walletStatus);\n    } else {\n      console.log(\"is not logged in\");\n    } // console.log(\"-------------------------\");\n    // console.log(\"---------- user! -------------\", user);\n    // console.log(\"-------------------------\");\n\n  }), []);\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected = walletUser === null || walletUser && !walletUser.loggedIn;\n\n  const handleGetAccount = async () => {\n    // console.log(\"calling handleGetAccount\");\n    const response = await sdk.send(await sdk.pipe(await sdk.build([sdk.getAccount(\"01cf0e2f2f715450\")])), {\n      node: \"http://localhost:8080\"\n    });\n    console.log(\"--------------------------\");\n    console.log(\"------------------------response--\", response);\n    console.log(\"--------------------------\"); //   setResult(await sdk.decodeResponse(response))\n  };\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n\n    const {\n      query\n    } = match;\n    return rawCode.replace(query, item => {\n      return match[item];\n    });\n  };\n\n  const createUserVault = async () => {\n    console.log(\"createUserVault\");\n  };\n\n  const checkUserWalletStatus = async () => {\n    console.log(\"----- checkUserWalletStatus -----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const runTestScript = async () => {\n    const response = await fcl.send([fcl.script`\n          pub fun main(): Int {\n            return 42 + 6\n          }\n        `]);\n    console.log(\"response\", response);\n  };\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, walletNotConnected && __jsx(CoralButton, {\n    onClick: fcl.authenticate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }), walletConnected && !walletIsSetup && __jsx(CoralButton, {\n    onClick: fcl.authenticate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), walletConnected && !walletSetup && __jsx(CoralButton, {\n    onClick: runTestScript,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Run Test Script\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), walletConnected && __jsx(\"div\", {\n    style: {\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, __jsx(JSONPretty, {\n    id: \"json-pretty\",\n    data: walletUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default WalletSettings;\n{\n  /* <div>\n            <button onClick={handleGetAccount}>Get Account</button>\n            <pre>{JSON.stringify(result, null, 2)}</pre>\n          </div> */\n}","map":{"version":3,"sources":["/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js"],"names":["React","useState","useEffect","sdk","JSONPretty","CoralButton","MintButton","GradientButton","checkReference","fcl","WHITE","LIGHT_CORAL","MAGIC_MINT","Container","display","flexDirection","borderRadius","backgroundColor","boxShadow","padding","WalletSettings","walletUser","setWalletUser","walletIsSetup","setWalletIsSetup","currentUser","subscribe","user","loggedIn","console","log","walletStatus","checkUserWalletStatus","walletConnected","walletNotConnected","handleGetAccount","response","send","pipe","build","getAccount","node","getAddress","nullPrefix","addr","generateCode","rawCode","match","query","replace","item","createUserVault","snapshot","address","contractAddress","scriptCode","script","checkResult","decode","runTestScript","authenticate","walletSetup","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport JSONPretty from \"react-json-pretty\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport styled from \"@emotion/styled\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nconst Container = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\",\n});\n\nconst WalletSettings = () => {\n  const [walletUser, setWalletUser] = useState(null);\n  const [walletIsSetup, setWalletIsSetup] = useState(false);\n\n  useEffect(\n    () =>\n      fcl.currentUser().subscribe(async (user) => {\n        if (user.loggedIn) {\n          setWalletUser(user);\n          console.log(\"is logged in\");\n          // Check if the wallet is set up yet\n          const walletStatus = await checkUserWalletStatus();\n          setWalletIsSetup(walletStatus);\n          console.log(\"walletStatus\", walletStatus);\n        } else {\n          console.log(\"is not logged in\");\n        }\n        // console.log(\"-------------------------\");\n        // console.log(\"---------- user! -------------\", user);\n        // console.log(\"-------------------------\");\n      }),\n    []\n  );\n\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected =\n    walletUser === null || (walletUser && !walletUser.loggedIn);\n\n  const handleGetAccount = async () => {\n    // console.log(\"calling handleGetAccount\");\n    const response = await sdk.send(\n      await sdk.pipe(await sdk.build([sdk.getAccount(\"01cf0e2f2f715450\")])),\n      { node: \"http://localhost:8080\" }\n    );\n    console.log(\"--------------------------\");\n    console.log(\"------------------------response--\", response);\n    console.log(\"--------------------------\");\n    //   setResult(await sdk.decodeResponse(response))\n  };\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n    const { query } = match;\n    return rawCode.replace(query, (item) => {\n      return match[item];\n    });\n  };\n\n  const createUserVault = async () => {\n    console.log(\"createUserVault\");\n  };\n\n  const checkUserWalletStatus = async () => {\n    console.log(\"----- checkUserWalletStatus -----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const runTestScript = async () => {\n    const response = await fcl.send([\n      fcl.script`\n          pub fun main(): Int {\n            return 42 + 6\n          }\n        `,\n    ]);\n    console.log(\"response\", response);\n  };\n\n  return (\n    <Container>\n      <div>\n        {walletNotConnected && (\n          <CoralButton onClick={fcl.authenticate}>Connect Wallet</CoralButton>\n        )}\n        <br />\n        <br />\n        <br />\n        {walletConnected && !walletIsSetup && (\n          <CoralButton onClick={fcl.authenticate}>Connect Wallet</CoralButton>\n        )}\n        <br />\n        <br />\n        <br />\n        {/* {walletConnected && !walletSetup && (\n          <CoralButton onClick={handleCheckRef}>Check Reference</CoralButton>\n        )} */}\n        <br />\n        <br />\n        <br />\n        {walletConnected && !walletSetup && (\n          <CoralButton onClick={runTestScript}>Run Test Script</CoralButton>\n        )}\n        <br />\n        <br />\n        <br />\n        {walletConnected && (\n          <div style={{ fontSize: 14 }}>\n            <JSONPretty id=\"json-pretty\" data={walletUser}></JSONPretty>\n          </div>\n        )}\n        {/* <GradientButton>{LABEL}</GradientButton> */}\n      </div>\n    </Container>\n  );\n};\n\nexport default WalletSettings;\n\n{\n  /* <div>\n            <button onClick={handleGetAccount}>Get Account</button>\n            <pre>{JSON.stringify(result, null, 2)}</pre>\n          </div> */\n}\n"]},"metadata":{},"sourceType":"module"}